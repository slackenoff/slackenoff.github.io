<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="劣质真心/Again"><title>linux命令 · 劣质真心的Blog</title><meta name="description" content="linux是助推器，影响个人在IT赛道上的speed推荐一个我认为比较实用的查询网站linux命令搜索


写在前面的话    1. 什么是linux
            linux是服务器领域最常用的多用户、多任务操作系统，开源免费，有诸多的发行版，常见的有redhat，centos，ubun"><meta name="keywords" content="Blog,博客,Hexo"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="shortcut icon" type="image/x-icon" href="/images/JOJO.jpg"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/insight.css"><link rel="stylesheet" href="/css/search.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.4.2"></head><body><div class="page-top animated fadeInDown"><div class="nav"><li> <a href="/">Home</a></li><li> <a href="/archives">Archives</a></li><li> <a href="/tags">Tags</a></li></div><div class="information"><div class="nav_right_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li><li><a class="fa fa-search" onclick="openWindow();"></a></li></div><div class="avatar"><img src="/images/kuuga.jpg"></div></div></div><div class="sidebar animated fadeInDown"><div class="sidebar-top"><div class="logo-title"><div class="title"><img src="/images/kuuga.jpg" style="width:220px;" alt="favicon"><h3 title=""><a href="/">劣质真心的Blog</a></h3><div class="description"><p>少年易老学难成，一寸光阴不可轻。未觉池塘春草梦，阶前梧叶已秋声。</p></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://github.com/slackenoff"><i class="fa fa-github"></i></a></li><li><a href="mailto:lzzxti@163.com"><i class="fa fa-envelope"></i></a></li></ul></div></div><div class="footer"><div class="p"> <span>  </span><i class="fa fa-star"></i><span> 劣质真心/Again</span></div><div class="by_farbox"><span>Powered by </span><a href="https://hexo.io/zh-cn/" target="_blank">Hexo </a><span> & </span><span>Anatolo </span></div><div class="beian"></div></div></div><div class="main"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>linux命令</a></h3></div><div class="post-content"><p><h1 id="linux是助推器，影响个人在IT赛道上的speed"><a href="#linux是助推器，影响个人在IT赛道上的speed" class="headerlink" title="linux是助推器，影响个人在IT赛道上的speed"></a>linux是助推器，影响个人在IT赛道上的speed</h1><p>推荐一个我认为比较实用的查询网站<a target="_blank" rel="noopener" href="https://wangchujiang.com/linux-command/">linux命令搜索</a></p>
<span id="more"></span>

<h1 id="写在前面的话"><a href="#写在前面的话" class="headerlink" title="写在前面的话"></a>写在前面的话</h1><pre><code>    1. 什么是linux
            linux是服务器领域最常用的多用户、多任务操作系统，开源免费，有诸多的发行版，常见的有redhat，centos，ubuntu等
            linux系统启动过程简要介绍以及linux核心——内核的功能简要描述
                    启动过程：      
                            1. 内核引导: 开机bios自检，按照bios设定的启动设备启动，一般是硬盘，硬盘激活后，操作系统接管，读取/boot 目录下的内核文件(镜像、压缩包等)
                            2. init进程： 运行init进程，它是所有进程的起点，操作系统在/etc/inittab目录下读取init进程的配置文件；如windows系统的一些开机即启动的服务一样，linux
                                          的守护进程 daemon需要开机启动，init进程的一大任务就是运行开机启动的程序。
                                          
                                          linux允许为不同的场合分配不同的开机启动程序，这个过程叫做分配运行级别，系统启动时根据运行级别，确定运行哪些程序；linux共设有7个运行级别
                            3. 系统初始化： 调用rc.d目录下的shell脚本完成系统初始化工作，看网上的说法，调用了./rc.sysinit，但是没找到，只找到了rc0-6.d/。看了下init.d的readme，似乎是被systemctl相关的服务取代了。
                                           这个脚本的作用是 激活交换分区，检查磁盘，加载硬件模块以及一些其他需要优先执行的任务。初始化过程中的第一个进程是systemd，pid是1.
                            4. 建立终端：  rc脚本执行完毕后，返回init进程，【运行mingetty程序，打开终端，设置模式】，以便用户登录系统。
                            5. 用户接入
    2. 什么是shell？ 有什么功能？ linux默认使用什么shell？
            shell是交互式工具，也称解释器，是用户与linux沟通的桥梁，它为用户提供了启动程序、管理文件系统中的文件以及运行在Linux系统上的进程的途径；默认的shell都是bash
</code></pre>
<h1 id="辅助命令或常识"><a href="#辅助命令或常识" class="headerlink" title="辅助命令或常识"></a><strong>辅助命令或常识</strong></h1><pre><code>    FHS  File System Hierarchy Standard  文件系统层次结构标准   man hier
            bin   存放二进制的可执行程序
            boot  系统引导时使用的文件
            dev   存放设备文件，通过设备文件访问外部设备
            etc   系统配置文件
            home  所有用户的根目录，8个用户则有8个对应的/home/dir1..8
            lib   存放根文件系统中的程序运行所需要的共享库及内核模块
            mnt   临时文件系统的挂载点目录
            media 即插即用型存储设备的挂载点，如cd，dvd
            opt   第三方软件的存放目录
            proc  虚拟文件系统，存放当前内存的映射，再不重启机器的情况下管理内核
            root  管理员用户目录
            sbin  管理员才能访问的存放二进制可执行文件的目录，同bin
            srv   系统对外提供服务的目录
            tmp   放置各种临时文件的目录
            usr   存放系统应用程序
            var   存放需要随时改变的文件，如系统日志，脱机工作目录等
    

    文件类型及其颜色： 
            1. 普通文件    灰色  ||     可执行文件  绿色    ||    压缩文件    红色 ls -l 查看为 -
            2. 目录文件    蓝色   ls -l 查看为 d
            3. 设备文件    黄色  /dev/..   块设备文件 b  硬盘软盘  随机访问设备 +   字符设备文件 c 串口、键盘 顺序访问设备
            4. 链接文件    浅蓝色   ls -l  查看时，显示为  “|”   软链接（源文件的快捷方式，源动，链接动） 和 硬链接 （源文件别名，无论源动还是链接动，另一方都会改变），默认硬链接 。
            5. 管道文件    棕色   用于进程间通信  ls -l 查看为 p
            6. 套接字文件  紫色   用于网络通信    ls -l 查看为 s

    /文本  --查询文本

    n/N    --向后向前搜索

    pageUp/Down --向上向下翻页

    ctrl+C  --结束执行

    help  command   --查看命令文档

    man [1..9]   --查看不同手册页，存放路径  /usr/share/man/..

    findmnt    --查看已经挂载的文件系统、

    df  -Ph    --显示磁盘剩余空间
    
    fdisk -l   --显示磁盘分区

    firewall-cmd  --list-all   显示防火墙规则

    yum repolist  --查看已启用的软件更新源

    yum list  installed  --查看已安装的所有软件

    yum check-update/yum list updates  --查看可更新

    localectl   /etc/locale.conf  返回示例：LANG=&quot;zh_CN.UTF-8&quot;   --control the system locale [语言环境] and keyboard layout [键盘模式] settings
            localectl status  --查看本地语言环境设置
            localectl set-locale LANG=&quot;&quot; --设置语言环境
            localectl list-locales --查看常见的(官方用词known)语言环境
            .. 

    硬件时钟（RTC）和系统时钟(SC):  /etc/localtime    RTC-主板上显示的时间  SC-内核时钟（操作系统实际使用，采用UTC时间） 国内CST  和  UTC（0时区） 差8个小时
    timedatectl  query or change system time and date settings
            timedatectl status
            timedatectl set-timezone ZONE=&quot;&quot;  
            timedatectl set-time &quot;时间/年月/时间年月组合&quot;
    
    shutdown  [shutdown -c 取消shutdown] [shutdown -k 发送关机计划提示，默认是分钟]   系统关闭断电
    halt  = shutdown -h      系统关闭不断电
    poweroff = shutdown -P   系统关闭，断电
    最终都是执行  systemctl[/usr/sbin] poweroff/reboot/halt
            shutdown -[options] [+]5[minutes] “警示语”  【似乎临近重启时间，每分钟都会提示】


    whoami   --查看当前用户身份
    id       --查看当前用户的id信息，用户id，组id等
    groups   --查看用户所属的组
    cal      --显示日历
    df       --文件系统磁盘空间使用情况
    du       --指定文件或目录已占用的磁盘空间
    &lt;tab&gt;键  --自动命令补全，补全的对象包括[命令名]、[shell变量]、[用户名]、[主机名]、[目录或文件名]
    ！！     --执行【最近】一次执行的命令，也就是上一条命令
    ！[命令事件编号] --执行指定的历史命令
</code></pre>
<h1 id="包管理命令：rpm、apt、yum、dnf-fedora"><a href="#包管理命令：rpm、apt、yum、dnf-fedora" class="headerlink" title="包管理命令：rpm、apt、yum、dnf(fedora)"></a><strong>包管理命令：rpm、apt、yum、dnf(fedora)</strong></h1><pre><code>    包管理的功能大致归纳为5部分： 安装、卸载、升级、查询、验证
    noarch： 表示已编译的代码与平台无关
    epel： Extra Packages for Enterprise Linux。EPEL 是由 Fedora 社区打造，为 RHEL 及衍生发行版如 CentOS、Scientific Linux 等提供高质量软件包的项目。装上了 EPEL 之后，就相当于添加了一个第三方源。
    epel、repoforge、remi、Nginx、ownCloud、oVirt、RDO 知名的非官方仓库，gpgcheck是出于下载安全考虑的，当存在需要使用非官方仓库的软件包时，认准有gpg签名的非官方仓库。
    ***出处链接：https://www.jianshu.com/p/6a71714342e3***
</code></pre>
<h2 id="yum介绍yellow-dog-updater-modified"><a href="#yum介绍yellow-dog-updater-modified" class="headerlink" title="yum介绍yellow dog updater,modified"></a><strong>yum介绍</strong>yellow dog updater,modified</h2><p><em><strong>yum</strong></em>是在<em><strong>Fedora</strong></em>和<em><strong>RedHat</strong></em>以及<em><strong>SUSE</strong></em>中<em><strong>基于rpm</strong></em>的软件包管理器，它可以使系统管理人员交互和自动化地更新与管理RPM软件包，<strong>能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软体包，无须繁琐地一次次下载、安装。</strong></p>
<h3 id="yum语法：-yum-选项-参数"><a href="#yum语法：-yum-选项-参数" class="headerlink" title="yum语法：  yum [选项]  [参数]"></a><em><strong>yum语法：  yum [选项]  [参数]</strong></em></h3><p>选项： </p>
<pre><code>    -h：显示帮助信息；
    -y：对所有的提问都回答“yes”；
    -c：指定配置文件；
    -q：安静模式；
    -v：详细模式；
    -d：设置调试等级（0-10）；
    -e：设置错误等级（0-10）；
    -R：设置yum处理一个命令的最大等待时间；
    -C：完全从缓存中运行，而不去下载或者更新任何头文件。
</code></pre>
<p>参数： </p>
<pre><code>    install：安装rpm软件包；
    update：更新rpm软件包；
    check-update：检查是否有可用的更新rpm软件包；
    remove：删除指定的rpm软件包；
    list：显示软件包的信息；
    search：检查软件包的信息；
    info：显示指定的rpm软件包的描述信息和概要信息；
    clean：清理yum过期的缓存，clean all；
    shell：进入yum的shell提示符；
    resolvedep：显示rpm软件包的依赖关系；
    localinstall：安装本地的rpm软件包；
    localupdate：显示本地rpm软件包进行更新；
    deplist：显示rpm软件包的所有依赖关系。
    --installroot=path
</code></pre>
<p>常见用法：<br>        yum check-update  查看可更新的所有软件包<br>        yum update  下载更新已安装的所有软件包<br>        yum search name:version 查找软件包<br>        yum list installed  查看已安装的软件包<br>        yum info name  软件包详情<br>        yum install name  下载软件包<br>        yum update name 更新软件包<br>        yum remove  name 删除软件包<br>相关路径及操作：<br>        主配置文件：/etc/yum.conf   注： cachedir 缓存目录  logfile 日志文件路径<br>        官方仓库： base、updates、extras、cenosplus    配置文件/etc/yum.repos.d/*.repo<br>        启用或禁用仓库：<br>                        method1： 修改配置文件，enabled =0 / 1<br>                        method2： yum-config-manager –enable/disable repo_name<br>        了解： yum-plugin-fastestmirror插件是默认安装启动的，所以yum命令默认会从镜像地址列表中选择一个速度最快的镜像地址，并从该地址获取软件包</p>
<h2 id="apt-get介绍"><a href="#apt-get介绍" class="headerlink" title="apt-get介绍"></a><strong>apt-get介绍</strong></h2><p>apt-get命令 是Debian Linux发行版中的APT软件包管理工具。所有基于Debian的发行都使用这个包管理系统。deb包可以把一个应用的文件包在一起，大体就如同Windows上的安装文件。</p>
<p><em><strong>apt-get语法：apt-get [选项]</strong></em></p>
<p>选项：</p>
<pre><code>    apt-get install  # 安装新包
    apt-get remove   # 卸载已安装的包（保留配置文件）
    apt-get purge    # 卸载已安装的包（删除配置文件）
    apt-get update   # 更新软件包列表
    apt-get upgrade  # 更新所有已安装的包
    apt-get autoremove   # 卸载已不需要的包依赖
    apt-get dist-upgrade # 自动处理依赖包升级
    apt-get autoclean    # 将已经删除了的软件包的.deb安装文件从硬盘中删除掉
    apt-get clean        # 删除软件包的安装包

    -c：指定配置文件。
</code></pre>
<p>– 执行命令重现的一对命令： script 以及scriptreplay</p>
<h1 id="网络配置与包管理"><a href="#网络配置与包管理" class="headerlink" title="网络配置与包管理"></a>网络配置与包管理</h1><blockquote>
<p>要明确的基本问题</p>
</blockquote>
<pre><code>    1. 网络配置的内容有哪些？
            IP地址
            子网掩码
            默认网关
            dns
            ...

    2. 配置方式有哪些？
            静态手工配置
            DHCP服务动态获取

    3. 实操
            a) 了解常见的网络接口： 以太网接口eth、无线网络接口wlan、光纤分布式数据接口 fddi、点对点协议接口 ppp、本地回环接口  lo
            b) 网络设备名： en 以太网设备、wl 无线局域网设备、ww 无线广域网设备
            c) 硬件类型： o 主板板载设备、 s 热插拔插槽上的设备 、p pci总线或者usb接口上的设备
         3.1 使用IP命令查看并更改IP网络地址
                    ip addr show / ip a s  --查看全部接口的IP地址
                    ip [-4/-6] a s [指定接口名]  --指定接口的IP地址 
                    ip route show  --显示路由
                    ip neighbor show  --显示arp缓存
                    //修改IP地址
                    ip addr  [add/del]  [ip地址]  dev [网络设备接口]
                    //修改静态路由
                    ip route [add/del] [主机地址] via [网关地址]  dev [网络设备接口]
         3.2 配置TCP/IP网络
            a) 配置文件的路径
                    cat /etc/sysconfig/network-scripts/ifcfg-* 网络接口配置文件
                            type： 接口类型
                            defroute: 是否设置默认路由
                            ipv4_failure_fatal  IPv4地址配置失效，及时IPv6配置正确也禁用该设备
                            bootprotocol  获取网络参数的方式  dhcp、static、none

                    cat /etc/sysconfig/network-scripts/route-* 路由配置文件
                    cat /etc/hostname 本地主机名配置文件
                    cat /etc/hosts  主机名与IP地址的映射关系
                    cat /etc/metworks 域名与网络地址的映射
                    cat /etc/host.conf   e.g.  multi on  域名服务的客户端控制文件
                    cat /etc/resolv.conf  域名服务客户端的配置文件，用于指定服务器的位置
                    cat /etc/protocols  查看支持的协议、协议的协议号
                    cat /etc/services 查看支持的网络服务及其端口号

                    包转发
                    sysctl net.ipv4.ip_forward  --查看是否支持包转发,如果没有或者是0，改为1；
           3.3 nmcli  networkmanager是一项管理网络接口和配置网络连接的系统服务，控制管理工具包括GUI、TUI、Cli
                    1. 显示所有网络接口设备的状态  nmcli -p  [device] [status]   
                    2. 显示指定网络接口设备的状态  nmcli -p  device show ens33
                    3. 断开设备连接且置非自动连接状态  nmcli device  disconnect ens33 
                    4. 显示[激活的]所有连接  nmcli -p connection show [--active]
                    5. 显示指定连接的信息   nmcli -p connection show ens33
                    6. 激活指定网络接口上的连接 nmcli -p connection up id ens33
                    7. 激活指定接口上的连接配置,适用于定义了多个连接配置的情况  nmcli -p connection up &quot;my connection&quot; ifname ens33  
                    8. 重新加载连接配置   nmcli connection reload
                    9. 修改IP地址获得方式  nmcli connection modify ens33 ipv4.method manaul  // nmcli connection modify ens33 ipv4.method auto
                    10. 设置IP地址、网关和dns解析  nmcli -p connection modify ens33 ipv4.addresses 10.0.0.30/24  ipv4.gateway 10.0.0.1 ipv4.dns &quot;10.0.0.1 8.8.8.8&quot; 
                    11. 添加或删除ipv4属性   nmcli connection modify ens33 +/-ipv4.addr/gateway/dns
</code></pre>
<h1 id="基础架构服务"><a href="#基础架构服务" class="headerlink" title="基础架构服务"></a>基础架构服务</h1><h2 id="守护进程和系统初始化"><a href="#守护进程和系统初始化" class="headerlink" title="守护进程和系统初始化"></a>守护进程和系统初始化</h2><pre><code>    1. 系统守护进程： dbus、crond、cups、rsyslogd...
    2. 网络守护进程:  sshd、httpd、postfix、xinetd...
</code></pre>
<h2 id="初始化进程：-linux采用过3种初始化进程，sysVinit、Upstart、Systemd（centos7）"><a href="#初始化进程：-linux采用过3种初始化进程，sysVinit、Upstart、Systemd（centos7）" class="headerlink" title="初始化进程：  linux采用过3种初始化进程，sysVinit、Upstart、Systemd（centos7）"></a>初始化进程：  linux采用过3种初始化进程，sysVinit、Upstart、Systemd（centos7）</h2><h2 id="服务管理命令-systemctl-部分功能与service-命令等效"><a href="#服务管理命令-systemctl-部分功能与service-命令等效" class="headerlink" title="服务管理命令  systemctl  部分功能与service 命令等效"></a>服务管理命令  systemctl  部分功能与service 命令等效</h2><p>***********管理命令<br>        systemctl start   //启动服务<br>        systemctl stop    //停止服务<br>        systemctl restart //重启服务<br>        systemctl status  // 查看服务运行状态<br>        systemctl reload  // 重新加载服务配置文件<br>        systemctl is-active  // 查看服务是否正在运行<br>        systemctl –type service –failed  //查看已加载但处于failed状态的服务<br>        systemctl -at service // 显示所有服务<br>***********持久化命令<br>        systemctl enable //在系统启动时启用服务<br>        systemctl disable //在系统启动时停用服务<br>        systemctl list-unit-files –type service //查看服务的启停配置， static 灰、 enable  绿、disable  红</p>
<h2 id="计划任务-cron、at、batch"><a href="#计划任务-cron、at、batch" class="headerlink" title="计划任务   cron、at、batch"></a>计划任务   cron、at、batch</h2><pre><code>    at：  一次性任务    在指定时间执行一次
    batch： 一次性任务  在系统负载不重时执行一次
    cron： 周期性任务  周期性计划任务
</code></pre>
<p>–cronie软件提供周期性计划任务服务，由cronie、cronie-anacron、crontabs 3部分组成<br>        cronie： 提供crond守护进程及其配置目录 /etc/cron.d，以及crontab命令<br>        cronie-aracron：提供由crond调用的anacron程序及其配置文件/etc/anacrontab<br>        crontabs：提供run-parts脚本以及依赖此脚本的系统计划任务配置文件/etc/crontab和配置目录/etc/cron.{daily,weekly,monthly}<br>–crond进程工作原理<br>        crond进程有内部计时器，每一分钟唤醒一次进程，检测文件变化并加载到内存中，具体文件为：<br>                1. /etc/crontab<br>                2. /etc/cron.d/*<br>                3. /var/spool/cron/*   //用户自定义定时任务目录<br>                4. /etc/anacrontab<br>        如果上述文件中的cron任务的时间和日期与系统当前时间和日期符合，执行对应的cron任务，任务执行结束后，输出将以邮件的形式发送给安排cron任务的用户，或者配置文件中mailto指定的用户<br>注： 因为crond进程每分钟自动检测，所以对配置文件或目录的修改，不需要reload或者restart</p>
<p>crontab文件格式：  [分]  [时]  [日]  [月] [周]  [用户名] [命令]   共计7个字段<br>        分： 0-59<br>        时： 0-23<br>        日： 1-31<br>        月： 1-12<br>        周： 0-7   0，7都指周日<br>注:  <strong><em>多个值用【，】分割； 范围用【-】指定；范围步长用 【/n】表示；[</em>]代表任何时间，每个字段均不能为空</strong>*</p>
<p>–cron任务的创建及权限<br>        /etc/cron.allow  //如果存在，则只有文件中用户可以使用cron<br>        /etc/cron.deny   //如果存在，则文件中的用户不能使用cron<br>        crontab -e<br>        注： root用户不受约束<br>注： 环境变量 ： path  shell 解释器  mailto 指定用户<br>        cat /etc/crontab  [* * * * * * * root cmd]<br>        cat /etc/cron.d/0hourly 同上<br>        cd /etc/cron.{daily,weekly,monthly} 在目录下放要执行的脚本<br>–anacrontab<br>        /etc/anacrontab文件配置非周期性任务</p>
<h1 id="网络测试工具"><a href="#网络测试工具" class="headerlink" title="网络测试工具"></a>网络测试工具</h1><pre><code>    1. ping 命令
            测试网络连通性，发送icmp请求包  || ICMP是一个网络层协议。用来检测IP报文是否能够正常发送，并反馈发送出错原因，以及查询主机的信息，也就是差错查询和信息查询
                    ping  域名
                    ping  ip地址
    2. ss 命令  显示套接字统计信息
            ss -l 显示本地监听的socket
            ss -t 显示建立连接的tcp socket 
            ss -u 显示建立连接的udp socket
    3. lsof 命令  查看端口的进程，需要下载，不是内置的  yum search lsof  || yum install -y lsof
            lsof -i :22
    4. traceroute 命令  不是内置命令，需要下载
            显示数据包到达目的主机所经过的路由
    5. dig命令，可以测试dns服务器是否能正常工作
</code></pre>
<h1 id="其他工具"><a href="#其他工具" class="headerlink" title="其他工具"></a>其他工具</h1><pre><code>    ftp工具：  lftp
    wget下载工具
    links/w3m 字符界面浏览器
    远程数据同步工具：rsync  ，运行原理，首次同步时，全量同步，之后增量同步
    远程登录： ssh
    本地与远程主机间文件复制： scp
    sftp加密会话
</code></pre>
<h1 id="centos重要的系统目录"><a href="#centos重要的系统目录" class="headerlink" title="centos重要的系统目录"></a>centos重要的系统目录</h1><pre><code>    1. cat /etc/os-release  查看系统版本
       hostnamectl  
       uname -a
       uname -r
    
    2. cd /var/cache/yum  相关命令  
       yum makecache fast 将软件包信息提前在本地索引缓存，用来提高搜索安装软件的速度，
       yum clean all 清除索引缓存和下载包的缓存。
    
    3. cd /etc/yum.repos.d    切换、查看yum镜像源的目录
       vim xxx.repo           修改源配置文件
       yum repolist 查看镜像源列表
       源有： epel、extras、update、base  四种
    
    4. 查看内核版本有三种方式：
            cat /proc/version
            uname -a
            uname -r
    5. 用户配置信息丢失，登录非正常显示，如 bash-4.2
            还原办法： 切换目录 cd /etc/skel ;  查看目录下的文件  ls -a;
                      复制  .bashrc  .bash_profile 文件到  /root目录下
                      reboot
</code></pre>
<h1 id="文件目录cmd"><a href="#文件目录cmd" class="headerlink" title="文件目录cmd"></a>文件目录cmd</h1><pre><code>    1. 查看
            查看当前工作路径：  pwd
            查看文件和目录列表：  ls  -al 以长格式[l]显示当前路径下，全部[a]文件和目录（包含隐含文件、目录）
            查找指定文件： find &quot;name.extend&quot;  || find *.txt || find [查找的目录] -name &#39;前缀*&#39; 
            查看文件内容： cat/tac 文件名   
            分页查看文件内容： more/less  文件名
            显示前、后n行内容： head/tail -n 文件名     
            统计文本内容： wc -lwm  文件名  [l 行   m 字符数  w word counts]     
            查看文件类型： file  文件名
    2. 创建
            touch file1，file2  创建2个空文件，0字节
            echo &gt; file1 覆盖，没有则创建
            echo &gt;&gt; file1 添加，没有则创建
    3. 修改
            vi  
            mv name1 name2  将名为name1的文件或目录 改为name2
    4. 删除
            rm -f file&#123;1，3，5&#125; 强制删除  
            rm -r dir/  提醒删除目录及其内容
            rmdir  删除目录

    5. 链接
            ln a b  硬链接  b为链接
            ln -s  a b 软/符号链接  b为链接
    6. 复制
            cp [待复制内容]  [目标目录]
    时间戳：  atime 最后访问 ls -lu，ctime 最后改变 ls -lc，mtime 最后修改  ls -lt
    7. 打包  【多-&gt; 一，以便备份/传输】 、压缩 【大-&gt; 小 以便减少磁盘占用/传输】、解压 【小-&gt;大】 压缩格式  gzip，bzip2，xz
    
            tar   -c 创建  -r 添加 -t 罗列  -u 更新旧内容  -x 解压  -v 打包解压进度
            tar -cvf  包名.格式  [打包文件]  创建
            tar -xvf  包名.格式    extract
            gzip  文件  压缩文件
            gzip -d *.gz  解压文件  
</code></pre>
<h1 id="三剑客-grep-文本处理工具-与sed、awk"><a href="#三剑客-grep-文本处理工具-与sed、awk" class="headerlink" title="三剑客 grep 文本处理工具 与sed、awk"></a>三剑客 grep 文本处理工具 与sed、awk</h1><h1 id="实用命令"><a href="#实用命令" class="headerlink" title="实用命令"></a>实用命令</h1><blockquote>
<p>windows下的文件比对工具，如beyondCompare、ultraCompare  （收费）， Winmerge（免费） ，或者文本编辑器下插件（如notepad++，vscode,sublime等）<br>linux下diff命令，或者meld工具  </p>
</blockquote>
<h2 id="diff-命令"><a href="#diff-命令" class="headerlink" title="diff 命令"></a>diff 命令</h2><pre><code>    diff【2个文件，不带参数时，描述如何调整第一个文件来与第二个文件想匹配】  
                    -q或--brief    // 仅显示有无差异，不显示详细的信息  如果不同，输出Files a and b differ
                    -c            // 显示全部内容，并标出不同之处， ！ +  -
                                    *** 代表  第一个文件
                                    --- 代表  第二个文件
                                    ！ 需要在第一个文件修改一行或多行
                                    +  需要在第一个文件添加行
                                    -  需要在第一个文件删除行
            注： 
                默认输出须知 diff [不带参]
                    (a：添加， c：改变 ，d：删除）
                    &lt; 开头的行表示来自第一个文件
                    &gt; 开头的行表示来自第二个文件
               
    diff3【3个文件】  比较三个文件，将不同之处显示到标准输出

                    -A
            注： ====表示文件全不相同
                 ====3表示 第3个文件与其他2个不同
</code></pre>
<h2 id="sort命令"><a href="#sort命令" class="headerlink" title="sort命令"></a>sort命令</h2><pre><code>    sort -r  按逆序输出排序结果  以行首字母为排序对象
         -c  检查指定文件中的内容是否按字母顺序排序，不符合则输出 sort: 文件名：行号： disordr: 无序内容 
</code></pre>
<h2 id="awk命令"><a href="#awk命令" class="headerlink" title="awk命令"></a>awk命令</h2><h2 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a>sed命令</h2><h2 id="chmod命令，配合ll命令查看文件权限"><a href="#chmod命令，配合ll命令查看文件权限" class="headerlink" title="chmod命令，配合ll命令查看文件权限"></a>chmod命令，配合ll命令查看文件权限</h2><pre><code>    a)    第一位   文件类型
    b)    权限前3位   文件所有者的权限
    c)    权限中间3位  文件所属用户组的权限
    d)    权限后3位    其他用户的权限
    e)    其次是连接数
    f)    所属用户
    g)    所属用户组
    h)    文件大小
    i)    文件最后修改日期
    j)    文件名

    chmod 【a[所有人]u[文件拥有者]g[拥有者所属用户组]o[其他用户]】【+-=】【rwx】文件
    chmod 【a[所有人]b[拥有者所属的用户组]c[其他用户]】【+-=】【r=4，w=2，x=1，-=0】
</code></pre>
<h2 id="Kill-9-pid-与-kill-15-pid"><a href="#Kill-9-pid-与-kill-15-pid" class="headerlink" title="Kill  -9  pid  与 kill -15  pid"></a>Kill  -9  pid  与 kill -15  pid</h2><pre><code>    9，是强制执行系统信号，pid进程接到信号必须结束运行，可能导致数据丢失或者终端无法恢复到正常状态等
    15，先释放资源，再结束进程
    
</code></pre>
<h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><pre><code>    1. 普通终端输出，后面跟什么，输出什么   如：  echo  123   终端输出123
    2. 命令执行结果终端输出，输出命令执行结果    如： echo &quot;`ifconfig`&quot;  终端输出ifconfig网络信息,带 &quot;&quot; 等同于 ifconfig， 不带&quot;&quot;时，非格式化输出，不便于查看
    3. 如果文件存在，则覆盖写入，否则先创建，再写入。 如： 
            1. echo &quot;echo &quot;`ifconfig`&quot;&quot;&gt; test.sh 
            2. cat test.sh 发现获取的是本地网络信息
            3. 修改为 echo &quot;ifconfig&quot; &gt;test.sh
            4. cat test.sh 发现只有一行ifconfig
            5. 执行脚本报错，没有执行权限
            6. 修改权限，chmod 777 test.sh  
                    补充：  
                            1. 修改某类型文件,多种类型用空格分开： chmod 777 *.txt *.html *.sh
                            2. 修改某个文件目录下的全部文件权限： chmod 777 /dir/dir1 或者切换到该目录  chmod（a） 777 *
                            3. 默认是 chmod是对所有人 即all， 否则需要写ugo+-=rwx
            7.执行 ./test.sh，输出结果等效ifconfig
</code></pre>
<h2 id="if、ifconfig-配置和显示Linux内核中网络接口的网络参数"><a href="#if、ifconfig-配置和显示Linux内核中网络接口的网络参数" class="headerlink" title="if、ifconfig  配置和显示Linux内核中网络接口的网络参数"></a>if、ifconfig  配置和显示Linux内核中网络接口的网络参数</h2><pre><code>    返回信息如：
            ens33:   连接类型、 硬件地址；网卡IP、广播地址、子网掩码；网卡启停，网线接入状态，是否支持组播，最大传输单元（字节） 
            lo:  主机的回环地址，测试用

            ifconfig ens33  up 启动指定网卡
            ifconfig ens33  down 关闭指定网卡
            ifconfig ens33 [点分十进制ip地址]  netmask [子网掩码]  broadcast [广播地址]
</code></pre>
<h2 id="hostname-查看和修改主机名-即-root-xxx-中的xxx，hostname的改动是临时的，永久改动要用hostnamectl"><a href="#hostname-查看和修改主机名-即-root-xxx-中的xxx，hostname的改动是临时的，永久改动要用hostnamectl" class="headerlink" title="hostname   查看和修改主机名  即 root@xxx  中的xxx，hostname的改动是临时的，永久改动要用hostnamectl"></a>hostname   查看和修改主机名  即 root@xxx  中的xxx，hostname的改动是临时的，永久改动要用hostnamectl</h2><pre><code>    hostnamectl  status 查看当前主机名设置
    hostnamectl set-hostname xxx  要重启  //主机名保存在  /etc/hostname中
</code></pre>
<h2 id="route-本地路由表"><a href="#route-本地路由表" class="headerlink" title="route 本地路由表"></a>route 本地路由表</h2><pre><code>    destination： 可路由的IP
    gateway： 区分直连或非直连，直连0.0.0.0  非直连 显示网关IP
    genmask： 目标网络的掩码
    metric： 路由开销，值越小，优先级越高
    Iface： 从哪个网卡发出的请求

    常用：   
            route -n  不用代名词，以数字显示IP
            route add -net [] gw []
            route del -net []
</code></pre>
<h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><pre><code>    -a : 显示所有活跃的网络连接
    -r ： 路由表 等于 route -n
    -t ： tcp协议相关
    -u ： udp协议相关
    -l :  处于监听状态的网络连接及端口信息
    -p ： 显示与网络连接相关联的进程号、进程名称信息
    
    netstat -atlp/aulp
    netstat -r
</code></pre>
<h2 id="ps、pidof、pgrep-查看进程"><a href="#ps、pidof、pgrep-查看进程" class="headerlink" title="ps、pidof、pgrep  查看进程"></a>ps、pidof、pgrep  查看进程</h2><pre><code>     ps -u root 查看root用户的进程信息
     ps auxw  ||  ps -efw   查看所有运行的进程, w查看完成命令信息
    进程信息： pid、ppid 父进程、tty  启动进程的终端、stat 当前状态
              start  启动时间
              vsz  占用的虚拟内存空间  kb
              rss 占用的内存空间   kb
              time  进程启动后占用的cpu时间
              user  用户名
              size  进程代码大小+数据大小+栈空间大小， kb
              command  进程的命令
    进程状态：
            R 进程正在执行中
            S 睡眠状态
            T 追踪或停止
            Z 僵尸进程
            W 进程没有固定的pages
            &lt; 高优先级进程
            N 低优先级进程
    查找特定状态的进程
            ps -ef -o stat,ppid,pid,cmd |grep -e &#39;^[STZ]&#39;  --  &#39;-o&#39;指自定义输出哪些信息，grep -e 指定字符串作为查找内容的样式
</code></pre>
<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><blockquote>
<p>不使用系统的标准输入（键盘）、输出（显示器）、错误（显示器）端口，重新指定输入，输出，错误端口，一般指向文件。通过重定向符实现重定向</p>
</blockquote>
<pre><code>    &gt;  覆盖输出  /   &gt;&gt;  末尾追加输出
    &lt;  不常用
    2&gt;  /   2&gt;&gt;   错误重定向， &gt; 覆盖输出  &gt;&gt; 末尾追加输出
    &amp;&gt;  输出重定向，错误重定向
</code></pre>
<h2 id="管道命令-管道的含义，-命令接受标准输入后，产生标准输出，作为下一个命令的输入，依次类推，通过-衔接，形成类似管道线，单向执行，顺序为从左到右依次执行"><a href="#管道命令-管道的含义，-命令接受标准输入后，产生标准输出，作为下一个命令的输入，依次类推，通过-衔接，形成类似管道线，单向执行，顺序为从左到右依次执行" class="headerlink" title="管道命令   管道的含义，  命令接受标准输入后，产生标准输出，作为下一个命令的输入，依次类推，通过 | 衔接，形成类似管道线，单向执行，顺序为从左到右依次执行"></a>管道命令   管道的含义，  命令接受标准输入后，产生标准输出，作为下一个命令的输入，依次类推，通过 | 衔接，形成类似管道线，单向执行，顺序为从左到右依次执行</h2><pre><code>    find &#39;&#39;  | grep | less/more ...
</code></pre>
<h2 id="命令组合-使用元字符将若干shell命令组合"><a href="#命令组合-使用元字符将若干shell命令组合" class="headerlink" title="命令组合   使用元字符将若干shell命令组合"></a>命令组合   使用元字符将若干shell命令组合</h2><pre><code>    cmd1 ; cmd2  顺序执行cmd1，cmd2
    cmd1&amp;&amp;cmd2  与逻辑，当cmd1成功执行，则执行cmd2，否则不执行cmd2；
    cmd1 || cmd2  或逻辑，当cmd1不成功执行时，则执行cmd2，否则不执行cmd2；
</code></pre>
<h2 id="创建用户-linux是多用户的"><a href="#创建用户-linux是多用户的" class="headerlink" title="创建用户  linux是多用户的"></a>创建用户  linux是多用户的</h2><pre><code>    用户账户： 普通用户  uid从500开始、 root用户  uid为0
    组账户： 私有组  创建时未指定的默认是私有组   、 标准组  创建时需指定
    主要是4个账户系统文件： /etc/passwd  用户   /etc/shadow 口令  /etc/group  组 /etc/gshadow  组口令
    useradd user1  --创建
    passwd  user1  --认证
    userdel  -r user1  --删除用户及其目录
    groupadd staff  --创建staff组
    useradd -G staff user1  --新建user1，属于staff组成员
    usermod -G staff tom    --将tom添加到staff组中
    groupmod -n  newstaff staff --修改组名
    groupdel staff  --删除组staff
    用户密码时效：  修改/etc/login.defs   或者通过chage命令修改  【chage，不是change】 -l 【用户】查看
</code></pre>
<h2 id="操作权限-r-w-x"><a href="#操作权限-r-w-x" class="headerlink" title="操作权限  r  w  x"></a>操作权限  r  w  x</h2><pre><code>    rwx  针对的用户  user （uid）、 group (gid)、 other
    如果用户uid与文件uid相同，则应用用户权限
    如果用户gid与文件gid相同，则应用用户组权限
    如果uid，gid都不匹配，则应用其他用户权限

    》》 文字设定法 chmod [augo][+-=][rwxugo(此处ugo指与对应用户权限相同)] 文件/目录  
    》》 数字设定法 chmod [0-7][0-7][0-7] 文件
</code></pre>
<h2 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h2><pre><code>    修改文件或目录的属主、属组
    chown -R user:group 文件/目录  修改属主、属组
</code></pre>
<h1 id="系统日常维护软件包及命令"><a href="#系统日常维护软件包及命令" class="headerlink" title="系统日常维护软件包及命令"></a>系统日常维护软件包及命令</h1><pre><code>    htop包：  动态显示系统进程任务
    procps包： 
    nload包
    iotop包
    sysstat包
</code></pre>
<blockquote>
<p>top 动态显示当前正运行的进程  tasks（运行中、睡眠、中止、僵尸进程）及其重要信息，包括内存和cpu占用</p>
</blockquote>
<pre><code>    top 标准输出包括两部分：  统计信息、进程信息
            统计信息： 
                    第一行 top - 之后显示的是uptime的输出，依次为： 当前时间、系统运行时间、登录用户数、平均负载（依次为1，5，15min）
                    第二行 进程数统计及其状态
                    第三行 内存和交换分区信息


            进程信息：
                    pid  进程号
                    user 所有者
                    pr 优先级，越小优先级越高
                    ni 进程nice值，负值代表高优先级   正值代表低优先级
                    virt 进程占用虚拟内存  kb  swap + res
                    res  进程使用，且未被唤出的物理内存大小  kb  code+data
                    shr 共享内存   kb
                    s 进程状态  d 不可中断的睡眠状态  r 运行 s 睡眠  t 跟踪/停止  z 僵尸进程
                    %cpu 
                    %mem 物理内存占比
                    time+command
</code></pre>
<blockquote>
<p>uptime 显示系统平均负载</p>
</blockquote>
<blockquote>
<p>vmstat 显示进程队列、内存、交换分区、块设备io以及cpu活跃信息</p>
</blockquote>
<pre><code>    r 运行队列中等待运行的进程数
    b 等待 i/o的进程数
    swpd 交换空间
    free 空闲的物理内存
    buff 缓冲内存
    cache 缓存的内存
    inact 不活跃内存
    active 活跃内存
    si 每秒从交换区写到内存的大小
    so 每秒写到交换区的内存大小
    bi 每秒读取块设备的块数
    bo 每秒写入块设备的快数
    in 每秒中断数
    cs 每秒的上下文切换次数
    us 用户进程执行时间的百分比
    sy 系统进程执行时间百分比
    id 空闲时间百分比
    wa  等待i/o时间的百分比
    st 管理程序为另一个虚拟进程提供服务而等待虚拟cpu的百分比
</code></pre>
<blockquote>
<p> 分析系统状态的一些标准</p>
</blockquote>
<pre><code>    **cpu**：平均负载，n个cpu，若平均负载小于n，则cpu空闲，反之繁忙
             核心态和用户态进程执行时间占比&lt;70%，则视为状态良好，若&gt; 90%，表示cpu资源吃紧
             若id&lt; 10% ，表示cpu性能较低，需要改善
</code></pre>
<h1 id="数据备份"><a href="#数据备份" class="headerlink" title="数据备份"></a>数据备份</h1><pre><code>    备份方式： 全量备份、增量备份、差分备份
    备份周期： 每月全量、每天增量、每周差分

    注意点： 备份需要定期验证； 备份应当与源主机分离
</code></pre>
</p><div class="tip">转载请注明出处<br>Author: 劣质真心/Again</div></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2023-04-06</span><i class="fa fa-tag"></i><a class="tag" href="/tags/linux/" title="linux">linux </a><span class="leancloud_visitors"></span><span>About7972words, 26min34secread</span></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="" onclick="javascript:join_favorite()" ref="sidebar"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,http://example.com/2023/04/06/linux命令/,劣质真心的Blog,linux命令,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2023/04/20/docker/" title="docker">Post Anterior</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2023/04/03/%E6%A6%82%E5%BF%B5%E7%A7%AF%E7%B4%AF/" title="概念积累">Próximo post</a></li></ul></div><script src="/js/visitors.js"></script></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script>(function(window){var INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)",},CONTENT_URL:"/content.json",};window.INSIGHT_CONFIG=INSIGHT_CONFIG})(window);</script><script src="/js/insight.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="Search..."><span class="searchbox-close"><a class="fa fa-times-circle" onclick="closeWindow();"></a></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"><p>Seraching...</p></div></div></div></div></body></html>